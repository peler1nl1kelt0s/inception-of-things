GREEN   = \033[32;1m
YELLOW  = \033[33;1m
BLUE    = \033[34;1m
RESET   = \033[0m

.PHONY: all up clean re status ssh-server ssh-worker help

all: up

up:
	@echo "\n$(BLUE)--> Vagrant ile sanal ortam baÅŸlatÄ±lÄ±yor (VirtualBox provider)...$(RESET)"
	@vagrant up --provider=virtualbox
	@echo "\n$(GREEN)âœ… Kurulum tamamlandÄ±! KÃ¼me durumu iÃ§in 'make status' komutunu kullanabilirsiniz.$(RESET)"

clean:
	@echo "$(YELLOW)--> Vagrant ortamÄ± yok ediliyor...$(RESET)"
	@vagrant destroy -f
	@rm -rf .vagrant agent-token.env
	@echo "\n$(GREEN)ğŸ§¹ Temizlik tamamlandÄ±!$(RESET)"

re: clean up

status:
	@echo "$(BLUE)--> Vagrant ortam durumu kontrol ediliyor...$(RESET)"
	@vagrant status
	@echo "\n$(BLUE)--> KÃ¼me node'larÄ±nÄ±n durumu kontrol ediliyor (Server Ã¼zerinden)...$(RESET)"
	@vagrant ssh musekerS -c "sudo kubectl get nodes -o wide"

ssh-server:
	@echo "$(BLUE)--> Server (musekerS) sanal makinesine baÄŸlanÄ±lÄ±yor...$(RESET)"
	@vagrant ssh musekerS

ssh-worker:
	@echo "$(BLUE)--> Worker (musekerSW) sanal makinesine baÄŸlanÄ±lÄ±yor...$(RESET)"
	@vagrant ssh musekerSW

help:
	@echo "$(GREEN)KullanÄ±labilir Makefile KomutlarÄ±:$(RESET)"
	@echo "  $(YELLOW)make up$(RESET)          - Vagrant ortamÄ±nÄ± ve K3s kÃ¼mesini baÅŸlatÄ±r."
	@echo "  $(YELLOW)make clean$(RESET)        - TÃ¼m Vagrant sanal makinelerini siler."
	@echo "  $(YELLOW)make re$(RESET)           - OrtamÄ± temizler ve yeniden kurar."
	@echo "  $(YELLOW)make status$(RESET)       - Vagrant ve K3s kÃ¼mesinin durumunu gÃ¶sterir."
	@echo "  $(YELLOW)make ssh-server$(RESET)  - Server (musekerS) sanal makinesine SSH baÄŸlantÄ±sÄ± yapar."
	@echo "  $(YELLOW)make ssh-worker$(RESET)  - Worker (musekerSW) sanal makinesine SSH baÄŸlantÄ±sÄ± yapar."
	@echo "  $(YELLOW)make help$(RESET)         - Bu yardÄ±m menÃ¼sÃ¼nÃ¼ gÃ¶sterir."

